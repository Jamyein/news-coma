# ==========================================
# 1-Pass 简化版配置
# 将2-pass AI评分系统重构为1-pass
# 配置项从20+减少到8项核心配置
# ==========================================

# ==========================================
# 数据源配置（与原版相同）
# ==========================================
rss_sources:
  - name: "TechCrunch"
    url: "https://techcrunch.com/feed/"
    weight: 1.0
    category: "科技"
    enabled: true
  
  - name: "GitHub Blog"
    url: "https://github.blog/feed/"
    weight: 1.0
    category: "开发"
    enabled: true
  
  - name: "Hacker News"
    url: "https://news.ycombinator.com/rss"
    weight: 1.5
    category: "技术"
    enabled: true
  
  - name: "The Verge"
    url: "https://www.theverge.com/rss/index.xml"
    weight: 0.9
    category: "科技"
    enabled: true
  
  - name: "The Economist"
    url: "https://www.economist.com/finance-and-economics/rss.xml"
    weight: 1.2
    category: "国际财经"
    enabled: true
  
  - name: "CNBC"
    url: "https://www.cnbc.com/id/10000664/device/rss/rss.html"
    weight: 1.4
    category: "国际财经"
    enabled: true
  
  - name: "BBC Business"
    url: "https://feeds.bbci.co.uk/news/business/rss.xml"
    weight: 1.3
    category: "国际财经"
    enabled: true
  
  - name: "MarketWatch"
    url: "https://www.marketwatch.com/rss/topstories"
    weight: 1.0
    category: "国际财经"
    enabled: true
  
  - name: "Financial Times"
    url: "https://www.ft.com/rss/home/international"
    weight: 1.2
    category: "国际财经"
    enabled: true
  
  - name: "华尔街见闻"
    url: "https://dedicated.wallstreetcn.com/rss.xml"
    weight: 1.6
    category: "国内财经"
    enabled: true
  
  - name: "36氪"
    url: "https://36kr.com/feed"
    weight: 1.6
    category: "国内财经"
    enabled: true
  
  - name: "东方财富"
    url: "http://rss.eastmoney.com/rss_partener.xml"
    weight: 1.6
    category: "国内财经"
    enabled: true
  
  - name: "WSJ 经济"
    url: "https://feeds.content.dowjones.io/public/rss/WSJcomUSBusiness"
    weight: 1.4
    category: "国际财经"
    enabled: true
  
  - name: "WSJ 市场"
    url: "https://feeds.content.dowjones.io/public/rss/RSSMarketsMain"
    weight: 1.3
    category: "国际财经"
    enabled: true
  
  - name: "WSJ 全球经济"
    url: "https://feeds.content.dowjones.io/public/rss/socialeconomyfeed"
    weight: 1.2
    category: "国际财经"
    enabled: true


# ==========================================
# 1-Pass AI配置（简化版 - 8项核心配置）
# ==========================================
smart_ai:
  # 核心配置（2项）
  provider: "zhipu"
  
  providers_config:
    gemini:
      api_key: "${GEMINI_API_KEY}"
      base_url: "https://generativelanguage.googleapis.com/v1beta/openai/"
      model: "gemini-3-flash-preview"
      max_tokens: 4000
      temperature: 0.3
      rate_limit_rpm: 5
      batch_size: 5
      max_concurrent: 1
    
    openai:
      api_key: "${OPENAI_API_KEY}"
      base_url: "https://api.openai.com/v1"
      model: "gpt-4o-mini"
      max_tokens: 2000
      temperature: 0.3
      batch_size: 5
      max_concurrent: 3
    
    claude:
      api_key: "${ANTHROPIC_API_KEY}"
      base_url: "https://api.anthropic.com/v1"
      model: "claude-3-haiku-20240307"
      max_tokens: 2000
      temperature: 0.3
      rate_limit_rpm: 50
      batch_size: 5
      max_concurrent: 3
    
    deepseek:
      api_key: "${DEEPSEEK_API_KEY}"
      base_url: "https://api.deepseek.com/v1"
      model: "deepseek-chat"
      max_tokens: 2000
      temperature: 0.3
      rate_limit_rpm: 60
      batch_size: 5
      max_concurrent: 3
    
    zhipu:
      api_key: "${ZHIPU_API_KEY}"
      base_url: "https://open.bigmodel.cn/api/paas/v4"
      model: "glm-4-flash"
      max_tokens: 65536      # 大模型支持长上下文，适合真批处理
      temperature: 0.3
      rate_limit_rpm: 40    # 降低每分钟请求数限制
      batch_size: 4         # 减小批次大小避免触发限制
      max_concurrent: 6     # 降低并发数以符合速率限制
    
    kimi:
      api_key: "${KIMI_API_KEY}"
      base_url: "https://api.moonshot.cn/v1"
      model: "moonshot-v1-8k"
      max_tokens: 2000
      temperature: 0.3
      rate_limit_rpm: 30
      batch_size: 5
      max_concurrent: 2
    
    qwen:
      api_key: "${DASHSCOPE_API_KEY}"
      base_url: "https://dashscope.aliyuncs.com/compatible-mode/v1"
      model: "qwen-max"
      max_tokens: 2000
      temperature: 0.3
      rate_limit_rpm: 60
      batch_size: 5
      max_concurrent: 3
    
  
  # 性能配置（4项）
  batch_size: 10              # 批次大小
  max_concurrent: 3           # 最大并发批次
  timeout_seconds: 90         # 超时时间（秒）
  max_output_items: 30        # 最大输出新闻数
  
  # 筛选配置（1项）
  diversity_weight: 0.3       # 多样性权重（0-1）
  
  # 评分标准
  scoring_criteria:
    importance: 0.30          # 重要性权重
    timeliness: 0.20          # 时效性权重
    technical_depth: 0.20     # 技术深度权重
    audience_breadth: 0.15    # 受众广度权重
    practicality: 0.15        # 实用性权重

  # 回退配置（简化）
  fallback_enabled: true
  fallback_chain:
    - "gemini"
    - "deepseek"

# ==========================================
# 输出配置
# ==========================================
output:
  max_news_count: 30          # 每期精选新闻数量
  max_feed_items: 50          # RSS feed保留条数
  archive_days: 30            # 归档保留天数
  time_window_days: 1         # 只处理最近N天的新闻
  use_smart_switch: true      # 是否启用智能切换

# ==========================================
# 过滤配置
# ==========================================
filters:
  min_score_threshold: 6.0    # 最低评分阈值
  blocked_keywords:           # 屏蔽关键词列表
    - "广告"
    - "推广"
    - "促销"
  use_semantic_dedup: true    # 启用TF-IDF语义去重
  semantic_similarity: 0.85   # 语义相似度阈值

# ==========================================
# 系统配置
# ==========================================
retry_attempts: 3
timeout: 120

# ==========================================
# 功能开关
# ==========================================
use_smart_scorer: true        # 启用1-Pass SmartScorer（设为false使用2-Pass）

