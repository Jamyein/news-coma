# ==========================================
# RSS 新闻聚合配置
# 支持14家国内外LLM提供商
# ==========================================

# ==========================================
# 数据源配置
# ==========================================
rss_sources:
  - name: "TechCrunch"
    url: "https://techcrunch.com/feed/"
    weight: 1.0
    category: "科技"
    enabled: true
  
  - name: "GitHub Blog"
    url: "https://github.blog/feed/"
    weight: 1.2
    category: "开发"
    enabled: true
  
  - name: "Hacker News"
    url: "https://news.ycombinator.com/rss"
    weight: 1.5
    category: "技术"
    enabled: true
  
  - name: "The Verge"
    url: "https://www.theverge.com/rss/index.xml"
    weight: 0.9
    category: "科技"
    enabled: true
  
  - name: "InfoQ"
    url: "https://feed.infoq.cn/"
    weight: 1.1
    category: "架构"
    enabled: true

# ==========================================
# AI 提供商配置（简化版）
# 只需修改 ai_provider 字段即可切换
# ==========================================


ai:
# 当前使用的提供商
# 可选值: gemini, openai, azure, claude, deepseek, zhipu, kimi, qwen, wenxin, spark, yi, minimax, ollama
  ai_provider: "zhipu"

  ai_providers:
  
    gemini:
      api_key: "${GEMINI_API_KEY}"
      base_url: "https://generativelanguage.googleapis.com/v1beta/openai/"
      model: "gemini-3-flash-preview"
      max_tokens: 4000
      temperature: 0.3
      rate_limit_rpm: 5
      batch_size: 5
      max_concurrent: 1
    
    openai:
      api_key: "${OPENAI_API_KEY}"
      base_url: "https://api.openai.com/v1"
      model: "gpt-4o-mini"
      max_tokens: 2000
      temperature: 0.3
      batch_size: 5
      max_concurrent: 3
    
    claude:
      api_key: "${ANTHROPIC_API_KEY}"
      base_url: "https://api.anthropic.com/v1"
      model: "claude-3-haiku-20240307"
      max_tokens: 2000
      temperature: 0.3
      rate_limit_rpm: 50
      batch_size: 5
      max_concurrent: 3
    
    deepseek:
      api_key: "${DEEPSEEK_API_KEY}"
      base_url: "https://api.deepseek.com/v1"
      model: "deepseek-chat"
      max_tokens: 2000
      temperature: 0.3
      rate_limit_rpm: 60
      batch_size: 5
      max_concurrent: 3
    
    zhipu:
      api_key: "${ZHIPU_API_KEY}"
      base_url: "https://open.bigmodel.cn/api/paas/v4"
      model: "glm-4-flash"
      max_tokens: 65536      # 大模型支持长上下文，适合真批处理
      temperature: 0.3
      rate_limit_rpm: 60
      batch_size: 5          # 基础批处理大小(向后兼容)
      max_concurrent: 10     # 真批处理启用后，此值可适当降低
    
    kimi:
      api_key: "${KIMI_API_KEY}"
      base_url: "https://api.moonshot.cn/v1"
      model: "moonshot-v1-8k"
      max_tokens: 2000
      temperature: 0.3
      rate_limit_rpm: 30
      batch_size: 5
      max_concurrent: 2
    
    qwen:
      api_key: "${DASHSCOPE_API_KEY}"
      base_url: "https://dashscope.aliyuncs.com/compatible-mode/v1"
      model: "qwen-max"
      max_tokens: 2000
      temperature: 0.3
      rate_limit_rpm: 60
      batch_size: 5
      max_concurrent: 3
    
    minimax:
      api_key: "${MINIMAX_API_KEY}"
      base_url: "https://api.minimax.chat/v1"
      model: "abab6.5-chat"
      max_tokens: 2000
      temperature: 0.3
      rate_limit_rpm: 60
      batch_size: 5
      max_concurrent: 3


  fallback:
    enabled: true
    max_retries_per_provider: 2
    fallback_chain:
      - "gemini"
      - "deepseek"
    
# ==========================================
# 全局评分标准（所有提供商共享）
# ==========================================
  scoring_criteria:
    importance: 0.30      # 重要性
    timeliness: 0.20      # 时效性
    technical_depth: 0.20 # 技术深度
    audience_breadth: 0.15 # 受众广度
    practicality: 0.15    # 实用性

# ==========================================
# AI评分缓存配置
# ==========================================
  cache_ttl_hours: 24     # AI评分缓存有效期(小时)

# ==========================================
# 真批处理配置(大幅降低API成本)
# ==========================================
  use_true_batch: true    # 是否启用真批处理(一次API调用处理多条)
  true_batch_size: 10     # 真批处理每批数量(需根据模型上下文调整)

# ==========================================
# 2-Pass评分配置(提升重磅新闻识别率)
# ==========================================
  use_2pass: true         # 启用2-Pass评分(快速预筛+深度分析)
  pass1_threshold: 7.0    # 预筛阈值(0-10)，低于此分数的新闻快速过滤
  pass1_max_items: 40     # 预筛最大保留数量

# ==========================================
# 语义去重配置(TF-IDF轻量级，GitHub Actions友好)
# ==========================================

# ==========================================
# 系统配置
# ==========================================
retry_attempts: 3
timeout: 120

# ==========================================
# 输出配置
# ==========================================
output:
  max_news_count: 10      # 每期精选新闻数量
  max_feed_items: 50      # RSS feed 保留条数
  archive_days: 30        # 归档保留天数
  time_window_days: 7     # 只处理最近 N 天的新闻

# ==========================================
# 过滤配置
# ==========================================
filters:
  min_score_threshold: 6.0      # 最低评分阈值
  dedup_similarity: 0.85        # 标题Levenshtein相似度阈值(0-1)
  use_semantic_dedup: true      # 启用TF-IDF语义去重(轻量级)
  semantic_similarity: 0.85     # 语义相似度阈值(0-1)，高于此值视为重复
  blocked_keywords:             # 屏蔽关键词列表
    - "广告"
    - "推广"
    - "促销"
